<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CMS</title>
    <!-- HEAD 안 -->
<style id="cms-fixes">
  /* Keep the CMS isolated; let inner pane scroll while syncing with window */
  html, body {
    margin: 0 !important;
    height: 100% !important;
    overscroll-behavior: none; /* prevent rubber-band chaining */
  }
  body {
    position: static !important;
    overflow: hidden !important; /* inner pane owns the scroll */
    -webkit-overflow-scrolling: auto;
  }
  /* Ensure the CMS root fills the viewport so virtualization can size correctly */
  #nc-root, #nc-root > div { min-height: 100vh; }
</style>
  </head>
  <body>
    <!-- ✅ Decap가 여기에 렌더링한다 -->
    <div id="nc-root"></div>

    <!-- (선택) Netlify Identity 위젯 -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <!-- ✅ Decap CMS v3 core -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

    <!-- ✅ Netlify(= git-gateway) 백엔드 플러그인 -->
    <script src="https://unpkg.com/decap-cms-backend-netlify@^3.0.0/dist/standalone.js"></script>

    <!-- 자동 초기화가 기본값이라 따로 CMS.init()는 보통 필요 없음 -->

    <script>
      // Safety: if any previous version left a fixed body class behind, remove it.
      document.documentElement.classList.remove('cms-ready');
      document.body.classList.remove('cms-ready');
    </script>
<script>
// --- Sync window scroll with Decap CMS inner scroller -----------------------
(function () {
  const FLAG = "__cmsScrollBound";

  function getPane() {
    const root = document.getElementById("nc-root");
    if (!root) return null;
    return (
      root.querySelector('.Pane-content') ||
      root.querySelector('[data-testid="collection-page"]') ||
      root.querySelector('main[role="main"]')
    );
  }

  function bind() {
    const pane = getPane();
    if (!pane || pane[FLAG]) return;
    pane[FLAG] = true;

    // When the inner pane scrolls, mirror it to the window (keeps address bar/UI happy)
    pane.addEventListener(
      'scroll',
      () => {
        if (window.scrollY !== pane.scrollTop) window.scrollTo(0, pane.scrollTop);
      },
      { passive: true }
    );

    // When the window scrolls (e.g., mouse wheel at page edges), keep pane aligned
    window.addEventListener(
      'scroll',
      () => {
        if (pane.scrollTop !== window.scrollY) pane.scrollTop = window.scrollY;
      },
      { passive: true }
    );

    // Initial alignment to avoid a big blank gap at the top
    pane.scrollTop = window.scrollY;
  }

  const rootEl = document.getElementById('nc-root');
  const mo = new MutationObserver(bind);
  if (rootEl) mo.observe(rootEl, { childList: true, subtree: true });
  bind();
})();
</script>
  </body>
</html>