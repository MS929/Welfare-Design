<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CMS</title>
    <!-- HEAD 안 -->
<style id="cms-fixes">
  /* 1) 기본값: 아무 것도 강제하지 않음 (초기 로딩, 로그인 모달 포함) */
  html, body { height: auto; }
  body { overflow: auto; }

  /* 2) CMS가 렌더링된 이후에만 적용되는 레이아웃 고정 */
  body.cms-ready {
    height: 100vh;            /* 뷰포트 기준 */
    overflow: hidden !important;  /* 바디 스크롤 제거 */
  }
  body.cms-ready #nc-root,
  body.cms-ready #nc-root > div,
  body.cms-ready #nc-root .Pane,
  body.cms-ready #nc-root main[role="main"],
  body.cms-ready #nc-root .Pane-content {
    height: 100%;
  }
  /* 실제 스크롤 담당 컨테이너 */
  body.cms-ready #nc-root .Pane-content,
  body.cms-ready #nc-root [data-testid="collection-page"] {
    overflow-y: auto !important;
    overscroll-behavior: contain;
  }

  /* 혹시 다른 전역 CSS가 간섭해도 강제 적용 */
  #nc-root { min-height: 100vh; position: relative; }
</style>
  </head>
  <body>
    <!-- ✅ Decap가 여기에 렌더링한다 -->
    <div id="nc-root"></div>

    <!-- (선택) Netlify Identity 위젯 -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <!-- ✅ Decap CMS v3 core -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

    <!-- ✅ Netlify(= git-gateway) 백엔드 플러그인 -->
    <script src="https://unpkg.com/decap-cms-backend-netlify@^3.0.0/dist/standalone.js"></script>

    <!-- 자동 초기화가 기본값이라 따로 CMS.init()는 보통 필요 없음 -->

    <script>
      // CMS가 마운트된 뒤에만 body에 cms-ready 클래스를 추가
      (function() {
        function ready() {
          if (document.body.classList.contains('cms-ready')) return;
          var root = document.getElementById('nc-root');
          // Decap가 렌더링을 시작하면 루트 아래에 div.Pane 등이 생깁니다
          if (root && root.querySelector('.Pane-content, [data-testid="collection-page"]')) {
            document.body.classList.add('cms-ready');
          } else {
            requestAnimationFrame(ready);
          }
        }
        // DOM이 준비되면 폴링 시작
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', ready);
        } else {
          ready();
        }
      })();
    </script>
  </body>
</html>